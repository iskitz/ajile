/**----------------------------------------------------------------------------+
| Product:  Ajile [com.iskitz.ajile]
| @version  0.9
|+-----------------------------------------------------------------------------+
| @author   Michael A. I. Lee [ http://ajile.iskitz.com/ ]
|
| Created:  Tuesday,   November   4, 2003    [2003.11.04]
| Modified: Monday,    July      23, 2007    [2007.07.23 - 04:27:21 AM EDT]
|+-----------------------------------------------------------------------------+
|
| [Ajile] - Advanced JavaScript Importing & Loading Extension is a JavaScript
|           module that adds namespacing and importing capabilities to the
|           JavaScript Language.
|
|           Visit http://ajile.iskitz.com/ to start creating
|
|                  "Smart scripts that play nice!"
|
|           Copyright (c) 2003-2007 Michael A. I. Lee, iSkitz.com
|
|+-----------------------------------------------------------------------------+
|
| ***** BEGIN LICENSE BLOCK *****
| Version: MPL 1.1/GPL 2.0/LGPL 2.1
|
| The contents of this file are subject to the Mozilla Public License Version
| 1.1 (the "License"); you may not use this file except in compliance with
| the License. You may obtain a copy of the License at
| http://www.mozilla.org/MPL/
|
| Software distributed under the License is distributed on an "AS IS" basis,
| WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
| for the specific language governing rights and limitations under the
| License.
|
| The Original Code is Ajile.
|
| The Initial Developer of the Original Code is Michael A. I. Lee
|
| Portions created by the Initial Developer are Copyright (C) 2003-2007
| the Initial Developer. All Rights Reserved.
|
| Contributor(s): Michael A. I. Lee [ http://ajile.iskitz.com/ ]
|
| Alternatively, the contents of this file may be used under the terms of
| either the GNU General Public License Version 2 or later (the "GPL"), or
| the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
| in which case the provisions of the GPL or the LGPL are applicable instead
| of those above. If you wish to allow use of your version of this file only
| under the terms of either the GPL or the LGPL, and not to allow others to
| use your version of this file under the terms of the MPL, indicate your
| decision by deleting the provisions above and replace them with the notice
| and other provisions required by the GPL or the LGPL. If you do not delete
| the provisions above, a recipient may use your version of this file under
| the terms of any one of the MPL, the GPL or the LGPL.
|
| ***** END LICENSE BLOCK *****
*-----------------------------------------------------------------------------*/
new function(){var _1,_2,_3,_4,_5;if(isIncompatible()){return;}var _6=true,_7=false,_8=false,_9=true,_a=true,_b=false,_c=false;var _d="Ajile",_e="Powered by ",_f="index",_10=".js",_11="<*>",_12="com.iskitz.ajile",_13="/",_14=[_d,"Import","ImportAs","Load","Namespace","JSBasePath","JSImport","JSPackage","JSPackaging","JSPacked","JSPath","NamespaceException","Package","PackageException"];var _15,_16=new NamespaceInfo(),_17="__loaded__",_18,LOG="",_1a;var _1b=["*","|",":","\"","<",">","?","[","{","(",")","}","]","\\","&","@","#","$","%","!",";","'","=","+","~",",","^","_"," ","`","-","/","."];var _1c=(/(cloakoff|cloak)/),_1d=(/(debugoff|debug)/),_1e=(/(legacyoff|legacy)/),_1f=(/(mvcoff|mvc)/),_20=(/(mvcshareoff|mvcshare)/),_21=(/(overrideoff|override)/),_22=(/(refreshoff|refresh)/),_23=(/(.*\/)[^\/]+/),_24=(/(.*)\.[^\.]+/),_25=(/(\/\.\/)|(\/[^\/]*\/\.\.\/)/),_26=(/:\/\x2f/);var _27=_12,_28=new SimpleSet(),_29=new SimpleSet(),_2a=(/MSIE/i).test(window.navigator.userAgent),_2b=(/Opera/i).test(window.navigator.userAgent),_2c=(/WebKit/i).test(window.navigator.userAgent),_2d=new SimpleSet();var _2e={clear:function(){for(var _2f in this){if("undefined"==typeof Object.prototype[_2f]){delete this[_2f];}}}};var _30=new SimpleSet(),_31=new SimpleSet(),_32=new SimpleSet();(function(_33){_1a=_33;if(!(_16=getNamespaceInfo(_12))){return;}if(_2){var _34=document.createElement("meta");if(_34){_34.httpEquiv=_e+_d;_e=_12.split(".").reverse().join(".");_34.content=_e+" :: Smart scripts that play nice ";getMainLoader(this.document).appendChild(_34);}}_16=new NamespaceInfo(_16);publishAPI(_1a);handleImportLoaded(_d,_12,_1a,this);loadController();cloak(_12);preserveImportFailSafe();})(this);function $Destroy(_35){if(_35&&_35!=_12){destroyModules(_35);return;}_28.clear();_29.clear();_2d.clear();_2e.clear();_30.clear();_31.clear();_32.clear();cloak();_18=null;delete Import;delete ImportAs;delete Load;delete Namespace;delete DEPRECATED$NamespaceException;delete _1a;delete window[_d];delete window.Import;delete window.ImportAs;delete window.JSImport;delete window.JSLoad;delete window.JSPackage;delete window.JSPackaging;delete window.Load;delete window.Namespace;delete window.NamespaceException;delete window.Package;delete window.PackageException;destroyEmptyNamespace("com.*");}function addDependence(_36,_37){if(_36==_27){return;}var _38=_28.get(_27);if(!_38){_28.add(_27,(_38=new SimpleSet()));}_38.add(_36,_37);}function AddImportListener(_39,_3a){preserveImportFailSafe();if(!_3a||(Function!=_3a.constructor)){if(_39&&(Function==_39.constructor)){_3a=_39;_39=null;}else{return false;}}else{if(_39&&(String!=_39.constructor)){return false;}}if(_39==_11&&this==window[_d]){return false;}if(!_39&&this!=window[_d]){_39=_11;}if(_39&&(_31.has(_39)||GetModule(_39))){return setTimeout(function(){_3a(_39);},62.25);}if(!_39&&(_31.getSize()>0||_30.getSize()==0)){setTimeout(function(){_3a(_39);},62.25);}var _3b=_29.get((_39=(_39||"")));if(!_3b){_29.add(_39,(_3b=new SimpleSet()));}_3b.add(Math.random(),_3a);return true;}function addUsage(_3c){if(_3c==_27){return;}var _3d=_32.get(_3c);if(!_3d){_32.add(_3c,(_3d=new SimpleSet()));}_3d.add(_27);}function cloak(_3e){if(_3e&&String!=_3e.constructor){return;}_3e=_3e||"";var _3f=GetNamespaceInfo(_3e);var _40=(_3f&&_3f.hasOption("cloak"));for(var id,src,sys,_44=getLoaders(),i=_44.length;--i>=0;){if(!_44[i]||((id=_44[i].title)&&_3e&&(id!=_3e))){continue;}src=_44[i].src;sys=(src&&(src.indexOf(_12)>=0))||(id&&(id.indexOf(_12)==0));if(sys||(!src&&id)||_40||_6){if((_3f=_44[i].parentNode)&&_3f.removeChild){_3f.removeChild(_44[i]);}}}}function cloakObject(_46){if(!_46||typeof _46.toString=="undefined"){return;}var _47,_48=((_47=(/(function\s*.*\s*\(.*\))/).exec(_46.toString())||[""])).length>1?_47[1]:_47[0];if(typeof _46.prototype=="undefined"){return;}_46.prototype.constructor.toString=function(e){return(_7&&!_6)?_48:_46.prototype.toString();};}function compareNumbers(_4a,_4b){return _4a-_4b;}function completeImports(_4c){var _4d,_4e;if(!(isString(_4c)&&_30.has(_4c))){_4e=_30.getAllArray();}else{if(GetModule(_4c)){_4e=[[_4c,_30.get(_4c)]];}}if(!_4e){return;}for(var _4f,i=_4e.length;--i>=0;){_4c=_4e[i][0];if(!(_30.has(_4c)&&(_4d=GetModule(_4c)))){continue;}logImportCheck((_4f=_4e[i][1]),_4c,arguments);if(_4f=="*"){_4f=null;}handleImportLoaded(_4f,_4c,_4d,this);updateDependents(_4c);}}function DEPRECATED$GetPathFor(_51){return"Ajile.GetPathFor("+_51+") is not supported. "+"Namespace paths are protected.";}function DEPRECATED$NamespaceException(_52){this.name="DEPRECATED: "+_12+".NamespaceException";this.message="DEPRECATED: Invalid _namespace name ["+_52+"]";this.toString=toString;function toString(){return"[ "+this.name+" ] :: "+this.message;}}function DEPRECATED$SetBasePath(_53){if(typeof _53!="undefined"){_16.path=_53;}}function destroyEmptyNamespace(_54){if(!_54){return;}var _55={},_56=_54.split("."),ns=window[_56[0]];for(var i=1,j=_56.length;typeof _56[i]!="undefined";i++){if(typeof ns[_56[i]]=="undefined"){break;}_55[_56[i-1]]=[i,true];ns=ns[_56[i]];for(var _5a in ns){if("undefined"==typeof Object.prototype[_5a]){if(_5a!=_56[i]){_55[_56[i-1]][1]=false;break;}}}}for(ns in _55){if("undefined"==typeof Object.prototype[ns]){if(_55[ns][1]){destroyModules(_56.slice(0,_55[ns][0]+1).join("."));}}}}function destroyModules(_5b){var _5c;if(_5b){if(String!=_5b.constructor){if((_5b=GetNamespaceInfo(_5b))){_5b=_5b.fullName;_5c=_5b.shortName;}}if(!_5c&&_5b){_5c=_5b.substring(_5b.lastIndexOf(".")+1);}_5b=_24.exec(_5b);_5b=_5b?_5b[1]:null;}var _5d=GetModule(_5b);if(_5d&&_5c){if(_5c=="*"||typeof(_5d[_5c])!="undefined"){if(_5c!="*"){if(_5d[_5c]==window[_5c]){window[_5c]=null;}delete _5d[_5c];}else{for(var _5e in _5d){if("undefined"==typeof Object.prototype[_5e]){delete _5d[_5e];}}destroyEmptyNamespace(_5b);}}}cloak(_5b);return;}function detectCurrentModule(_5f){var _60=_5f;var _61=_30.getAllArray();for(var _62,i=0,j=_61.length;i<j;++i){if(_31.has((_62=_61[i][0]))){continue;}if("*"!=_61[i][1]){_60=_24.exec(_62);}if(!(_60&&(_5f==_60[1]))){continue;}_31.add((_27=_62));return;}_27=_f;}function getContainer(_65){if(!_65){return window.document;}if(typeof _65.write=="undefined"){if(typeof _65.document!="undefined"){_65=_65.document;}else{if(typeof _65.parentNode!="undefined"){return getContainer(_65.parentNode);}else{return window.document;}}}return _65;}function getImportInfo(_66,_67){if(!_67){return null;}var _68=_67.split(".");var _69;for(var i=0,j=_68.length;i<j;i++){if(isNaN(_68[i])){continue;}_67=_68.slice(0,i).join(".");_66=_66||_68.slice(i-1,i)[0];_69=_68.slice(i).join(".");break;}if(!_69){return null;}return[_66,_67,_69];}function getLoaders(_6c){if(!(_6c=getContainer(_6c))){return null;}var _6d=(typeof _6c.scripts!="undefined"&&typeof _6c.scripts.length!="undefined"&&_6c.scripts.length>0)?_6c.scripts:(typeof _6c.getElementsByTagName!="undefined")?(_6c.getElementsByTagName("script")||[]):[];return _6d;}function getMainLoader(_6e){if(_6e){if((!_18||_3)&&!_2){if((_18&&_4&&_6e!=_18.ownerDocument)||!_18||!_4&&_3){if(_6e.lastChild&&_6e.lastChild.firstChild){_18=_6e.lastChild.firstChild;}}}else{if(!_18&&_2){_18=_15;}}}return _18;}function getMETAInfo(_6f){loadOptions(_6f);if(!_6f||_6f.constructor!=String){return[];}var _70=_10?_6f.lastIndexOf(_10):_6f.lastIndexOf(".");if(_70<_6f.length&&_70>=0){var _71=_6f.slice(_70,_70+_10.length);var _72=_6f.substring(0,_70);if(_72&&isNaN(_72.charAt(0))){_72="";}}return[_72,_71];}function GetModule(_73,_74){if(!isString(_73)){return null;}var _75=_74||window;_73=_73.split(".");for(var i=0,j=_73.length;i<j;i++){if(typeof _75[_73[i]]!="undefined"){_75=_75[_73[i]];}else{return null;}}return _75;}function GetNamespaceInfo(_78){if(!_78){return new NamespaceInfo(_16);}var _79=_78.constructor==String;for(var _7a in _2e){if("undefined"==typeof Object.prototype[_7a]){if((_79&&_78==_7a)||(!_79&&_78==GetModule(_7a))){return _2e[_7a];}}}return null;}function getNamespaceInfo(_7b,_7c){_7b=_7b||_12;if(_7b==_12&&_16.path){return _16;}var _7d=_2e[_7b];if(_7d){return _7d;}var _7e=getNamespaceLookups(_7b,_7c);if((_7d=getNamespaceInfoCached(_7b,_7e))){return(_2e[_7b]=_7d);}var _7f=getLoaders();if(!(_7f&&_7e)){return null;}var _80;for(var _81=false,_82,_83,i=0,j=_7f.length;i<j;i++){_82=unescape(_7f[i].src);if(_82&&_82.search(_26)==-1){_82=unescape(document.location.href);if(_82.charAt(_82.length-1)!=_13){if((_83=_23.exec(_82))!=null){if(_83[1].length>_82.search(_26)+3){_82=_83[1];}}}_82+=unescape(_7f[i].src);}if(typeof _82=="undefined"||_82==null){continue;}while(_25.test(_82)){_82=_82.replace(_25,"/");}if(_2d.has(_82)){continue;}_2d.add(_82);if(_81){continue;}var _86;for(var _87 in _7e){if(typeof Object.prototype[_87]!="undefined"){continue;}_86=_7e[_87];var _88,_89,_8a=[];for(var lc=_86.length;--lc>=0;){_88=_86[lc];_89=_82.lastIndexOf(_88)+1;if(_89<=0||_89==_8a[0]){continue;}_8a[_8a.length]=_89;log("Found Path [ "+_82+" ]",arguments);}if(_8a.length==0){continue;}_8a.sort(compareNumbers);_89=_8a[_8a.length-1];_7c=(_89==(_82.lastIndexOf(_88)+1))?_87:null;_80=_82.substring(0,_89);_81=true;if(_7b==_12&&_7f[i].title!=_12){_7f[i].title=_12;}var _8c=_89+_88.length-2;var _8d=getMETAInfo(_82.substring(_8c+1));var _8e=_8d[1];var _8f=_8d[0];break;}}if(!_80){return null;}_7d=new NamespaceInfo(_80,_7c,_7b,null,_8f,_8e);_2e[_7b]=_7d;return _7d;}function getNamespaceInfoCached(_90,_91){var _92=Number.MAX_VALUE;var _93;var _94=[];var _95;var _96=0;_91=_91||getNamespaceLookups(_90);var _97=[];var _98=_2d.getAll();_98:for(var _99 in _98){if(typeof Object.prototype[_99]!="undefined"){continue;}for(var _9a in _91){if(typeof Object.prototype[_9a]!="undefined"){continue;}_97[_97.length]=_9a;for(var _9b=_91[_9a],i=_9b.length;--i>=0;){if(0<(_95=_99.lastIndexOf(_9b[i]))){_93=_99.length-(_95+_9b[i].length);if(_93<_92){_92=_93;_96=_94.length;}_94[_94.length]=_95+1;var _9d=(_95+1)+_9b[i].length-2;var _9e=getMETAInfo(_99.substring(_9d+1));var _9f=_9e[1];var _a0=_9e[0];log("Found Cached Path [ "+_99+" ]",arguments);break _98;}if(i==0){delete _97[--_97.length];}}}}if(!_94||_94.length==0){return null;}_99=_99.substring(0,_94[_96]);var _a1=new NamespaceInfo(_99,_97[_96],_90,null,_a0,_9f);if(_a1.path){_2e[_90]=_a1;}return _a1;}function getNamespaceLookups(_a2,_a3){var _a4=getSeparator();var _a5=typeof _a3=="undefined"?_1b:[_a3];var _a6={};for(var i=_a5.length;--i>=0;){_a3=_a5[i];_a6[_a3]=[];_a6[_a3][2]=_a4+_a2.replace(/\x2e/g,_a3);_a6[_a3][0]=_a6[_a3][2]+_a3;_a6[_a3][1]=_a6[_a3][2]+_a4;_a6[_a3][2]=_a6[_a3][2]+".";}return _a6;}function getOptions(){return[(_6?"cloak":"cloakoff"),(_7?"debug":"debugoff"),(_8?"legacy":"legacyoff"),(_9?"mvc":"mvcoff"),(_a?"mvcshare":"mvcshareoff"),(_b?"override":"overrideoff"),(_c?"refresh":"refreshoff")].join(",");}function getSeparator(){var _a8=unescape(document.location.href);var _a9=_a8.lastIndexOf("\\")+1;var _aa=_a8.lastIndexOf("/")+1;_13=(_a9>_aa?"\\":"/");return _13;}function handleImport(_ab,_ac,url,_ae,_af,_b0,_b1){var _b2=_ac+(_ab=="*"?".*":"");var _b3=_b2;var _b4;do{if((_b2=_24.exec(_b2))){_b2=_b2[1];}else{break;}if(_b2==_b3){break;}_b3=_b2;_b4=getNamespaceInfo(_b2);}while(!_b4);if(typeof url=="undefined"||url==null||url.constructor!=String){url=(typeof _b4!="undefined"&&typeof(_b4.path)!="undefined")?_b4.path:(_16.path||"");}if(url.lastIndexOf("/")!=(url.length-1)){url+="/";}if(_8){if(_ae==false){_ae="/";}else{if(_ae==true){_ae=".";}}}if(typeof _ae=="undefined"){_ae=_b4?typeof _b4.notation=="undefined"?_16.notation:_b4.notation:_16.notation;}url+=escape(_ac.replace(/\x2e/g,_ae));addDependence(_ac,(_ab=="*"?_ac:_ab));addUsage(_ac);if(_30.add(_ac,_ab)){if(_ab=="*"){_ab=_17;log("Import (\""+_ac+".*\")...",arguments);}else{log("ImportAs (\""+_ab+"\", \""+_ac+"\")...",arguments);}if(_af){url+="."+_af;}url+=_10;if(_b4&&_b4.hasOption("refresh")){url=setRefresher(url);}var _b5=Load(url,getContainer((_b1||this)),"ImportAs(\""+_ab+"\", \""+_ac+"\");",false,_ac);if(!_b5){return _b0;}(new ImportThread(_ac)).start();}return _b0;}function handleImportLoaded(_b6,_b7,_b8,_b9){_b9=_b9||this;if(!_b8){return _b8;}if((_b6!=_17)&&hasNamingConflict(_b6,_b7,_b9)){_30.remove(_b7);return _b8;}if(!isSupported(_b7,_b6)){return null;}var _ba=[];var _bb=_30.get(_b7);if(_b6&&_b6!=_17&&(!_bb||(_bb!="*"&&_bb!=_17))){_b9[_b6]=_b8;_ba[0]="ImportAs (\""+_b6+"\", \""+_b7+"\")...SUCCESS";_30.remove(_b7);}else{if(_bb=="*"){_ba[_ba.length]=" ";var _bc;for(var _bd in _b8){if(typeof Object.prototype[_bd]!="undefined"){continue;}_bc=_b7+"."+_bd;if(_2e[_bc]||hasNamingConflict(_bd,_bc,_b9)){continue;}_b9[_bd]=_b8[_bd];_ba[_ba.length]="ImportAs (\""+_bd+"\", \""+_bc+"\")...SUCCESS";}_30.remove(_b7);if(_b6!=_17){_30.add(_b7,_17);}}else{if(_bb!="*"&&(_bb==_17||_b6==_17)){_ba[0]="Import (\""+_b7+".*\")...SUCCESS";_30.remove(_b7);}}}if(_ba.length>0){log(_ba.join("\r\n"),arguments);}notifyImportListeners(_b7);return _b8;}function hasNamingConflict(_be,_bf,_c0){_c0=_c0||this;if(_b||(typeof _c0[_be]=="undefined")||(GetModule(_bf)==_c0[_be])){return false;}log("\nWARNING: There is a naming conflict with the alias "+_be+".\nConsider using ImportAs with a different alias. For example:"+"\n\n\tImportAs (\""+_be+"1\", \""+_bf+"\");\n\n"+"The module can currently be accessed using its fully-qualified "+"name:\n\n\t"+_bf+".\n",arguments,_7);return true;}function Import(_c1,url,_c3,_c4){return ImportAs(null,_c1,url,_c3,_c4);}function ImportAs(_c5,_c6,url,_c8,_c9){preserveImportFailSafe();if(!_c6||_c6=="*"){log("ImportAs (\""+_c5+"\", \""+_c6+"\")...INVALID!");return null;}var _ca,_cb;if(!isString(_c5)){_c5="";}if((_ca=getImportInfo(_c5,_c6))){_c6=_ca[1];_c5=(_c5!=_17)?_ca[0]:_17;_cb=_ca[2];}else{if(!_c5){_c5=_c6.substring(_c6.lastIndexOf(".")+1);}}_c9=_c9||this;if(_c5=="*"){_c6=_24.exec(_c6)[1];}else{if(_c9[_c5]){for(var t=_14.length;--t>=0;){if(_c5!=_14[t]){continue;}log("ImportAs (\""+_c5+"\", \""+_c6+"\") "+"failed. "+_c5+" is restricted.",arguments);return _c9[_c5];}}}var _cd=_c9;var _ce="";for(var _cf=_c6.split("."),i=0,j=_cf.length;i<j;i++){if(typeof _cd[_cf[i]]!="undefined"){_cd=_cd[_cf[i]];_ce+=_cf[i]+".";}else{break;}}if((i>=j&&_c5!="*")){if(_30.has(_c6)||!_31.has(_c6)){_cd=handleImportLoaded(_c5,_c6,_cd,_c9);updateDependents(_c6);}return _cd;}if(_30.has(_c6)){if(_c5=="*"||_c5==_17){_c5=_c6;}addDependence(_c6,_c5);addUsage(_c6);return null;}return handleImport(_c5,_c6,url,_c8,_cb,_cd,_c9);}function ImportThread(_d2,ttl,_d4){_d4=_d4||500;var _d5=window.setInterval(stop,(ttl=ttl||60000));var _d6;var _d7=0;this.start=start;this.stop=stop;function start(){if(_d7>=_d4){stop();return;}if(GetModule(_d2)){completeImports();}else{_d6=window.setTimeout(start,0);}}function stop(){if(typeof _d6!="undefined"){window.clearTimeout(_d6);}if(typeof _d5!="undefined"){window.clearInterval(_d5);}}}function isIncompatible(){if(typeof document=="undefined"){return false;}_5="undefined"!=typeof document.write&&"undefined"!=typeof document.writeln;_1=_5&&"undefined"!=typeof document.createElement;_2=_1&&"undefined"!=typeof document.createTextNode&&"undefined"!=typeof document.getElementsByTagName&&"undefined"!=typeof(_15=document.getElementsByTagName("head")[0]).appendChild&&"undefined"!=typeof _15.innerHTML&&"undefined"!=typeof _15.insertBefore&&"undefined"!=typeof _15.removeChild&&"undefined"!=typeof _15.replaceChild;_3=_2&&"undefined"!=typeof document.firstChild&&"undefined"!=typeof document.lastChild&&"undefined"!=typeof document.parentNode;_4=_3&&"undefined"!=typeof document.getElementById&&"undefined"!=typeof document.ownerDocument;return!(_5||_1||_2||_3||_4);}function isString(_d8){return(_d8!=null&&typeof _d8!="undefined"&&_d8.constructor==String);}function isSupported(_d9,_da){var _db=(_d9==_27);var _dc=_30.has(_d9);var _dd=_28.get(_d9);function isInlineImportReady(){if(_db||isSupported(_27)||_dc){return true;}_30.add(_d9,_da);(new ImportThread(_d9)).start();return false;}if(!_dd||!(_dd=_dd.getAll())){return isInlineImportReady();}for(var _de in _dd){if("undefined"==typeof Object.prototype[_de]){if(!GetModule(_dd[_de])){return false;}}}return isInlineImportReady();}function Load(url,_e0,_e1,_e2,_e3,_e4,_e5){preserveImportFailSafe();if(!(_e0=getContainer(_e0))){log("Invalid container. Unable to load:\n\n["+url+"]",arguments);return false;}if(url){_2d.add(unescape(url));if(_c){url=setRefresher(url);}}if(!(_e4||_e5)){_e5="JavaScript";_e4="text/javascript";}if(typeof _e2=="undefined"){_e2=false;}var _e6;if(_1){_e6=_e0.createElement("script");}if(!_e6){if(_e1){_e1="setTimeout('"+_e1+"',0);";}LoadSimple(url,_e0,_e1,_e2,_e3,_e4,_e5);return false;}if(_e2){_e6.defer=_e2;}if(_e5){_e6.language=_e5;}if(_e3){_e6.title=_e3;}if(_e4){_e6.type=_e4;}if(url){log("Load [ "+url+" ]...",arguments);if(_2c||!_2b){_e6.src=url;}getMainLoader(_e0).appendChild(_e6);if(_2a||_2b){_e6.src=url;}log("Load [ "+url+" ]...DONE!",arguments);}if(!_e1){return true;}if(url){Load(null,_e0,_e1,_e2,_e3,_e4,_e5);return true;}if(typeof(_e6.canHaveChildren)=="undefined"||_e6.canHaveChildren){_e6.appendChild(_e0.createTextNode(_e1));}else{if(!_e6.canHaveChildren){_e6.text=_e1;}}getMainLoader(_e0).appendChild(_e6);return false;}function loadController(){if(!(_9||_a)){return;}if(_a){Load(_16.path+_f+_10,null,null,null,_f);}if(!_9){return;}var _e7=unescape(document.location.href);var _e8=_e7.lastIndexOf(_13);_e7=_e7.substring(++_e8);_e8=_e7.lastIndexOf(".");_e8=(_e8==-1)?0:_e8;if(""!=(_e7=_e7.substring(0,_e8))){_f=_e7;}Load(_f+_10,null,null,null,_f);}function loadOptions(_e9){if(!_e9||_e9.constructor!=String){return;}var _ea=_e9.lastIndexOf("?")+1;_e9=_e9.substring(_ea).toLowerCase();if(_e9.length==0){return;}var _eb;if((_eb=_1c.exec(_e9))){_6=_eb[1]=="cloak";}if((_eb=_1d.exec(_e9))){_7=_eb[1]=="debug";}if((_eb=_1e.exec(_e9))){SetLegacy(_eb[1]=="legacy");}if((_eb=_1f.exec(_e9))){_9=_eb[1]=="mvc";}if((_eb=_20.exec(_e9))){_a=_eb[1]=="mvcshare";}if((_eb=_21.exec(_e9))){_b=_eb[1]=="override";}if((_eb=_22.exec(_e9))){_c=_eb[1]=="refresh";}}function LoadSimple(src,_ed,_ee,_ef,_f0,_f1,_f2){if(!(_ed=getContainer(_ed))){return;}var _f3;if(src){log("LoadSimple [ "+src+" ]...",arguments);_f3=_ee;_ee=null;}var _f4="<"+"script"+(_ef?" defer=\"defer\"":"")+(_f2?(" language=\""+_f2+"\""):"")+(_f0?(" title=\""+_f0+"\""):"")+(_f1?(" type=\""+_f1+"\""):"")+(src?(" src=\""+src+"\">"):">")+(_ee?(_ee+";"):"")+"</script>\n";_ed.write(_f4);if(src){log("LoadSimple [ "+src+" ]...DONE!",arguments);}if(!(_ee=_ee||_f3)){return;}if(src){LoadSimple(null,_ed,_ee,_ef,_f0,_f1,_f2);}}function log(_f5,_f6,_f7){if(!_7&&!_f7){return;}var _f8,_f9=1<((_f8=(/function\s*(\w*)\(/).exec(_f6.callee))||["("]).length?_f8[1]:"";if(typeof _f5!="undefined"){var _fa=LOG;LOG=new Date()+"\t:: "+_27+" :: "+_f9+"\r\n"+_f5+"\r\n\r\n";if(typeof console!="undefined"){if(typeof console.info=="function"){console.info(LOG);}}if(typeof YAHOO!="undefined"){if(typeof YAHOO.log=="function"){YAHOO.log(LOG);}}if(typeof MochiKit!="undefined"){if(typeof MochiKit.log=="function"){MochiKit.log(LOG);}}LOG+=_fa;}if(_f7){ShowLog();}}function logImportCheck(_fb,_fc,_fd){var _fe=(_fb=="*"||_fb==_17)?("Import (\""+_fc+".*\")"):("ImportAs (\""+_fb+"\", \""+_fc+"\")");log((_fe+"...CHECKING"),_fd);}function Namespace(_ff,path,_101,_102){preserveImportFailSafe();_ff=_ff||"<default>";log("Namespace (\""+_ff+"\")",arguments);var _103=_102||window;if(_ff=="<default>"){_16.update(path,_101);log(_16,arguments);return _103;}detectCurrentModule(_ff);var _104=_ff.split(".");for(var i=0,j=_104.length;i<j;i++){if(typeof _103[_104[i]]!="undefined"){_103=_103[_104[i]];}else{_103=_103[_104[i]]={};}}var _107=_2e[_ff];if(_107){_107.update(path,_101);log(_107,arguments);return _103;}if(!path){_107=getNamespaceInfo(_ff,_101);}if(path||!_107){_107=new NamespaceInfo(path,_101,_ff);}if(_107&&!_2e[_ff]){_2e[_ff]=_107;}log(_107,arguments);return _103;}function NamespaceInfo(path,_109,_10a,_10b,_10c,_10d,_10e){this.hasOption=hasOption;this.toString=toString;this.update=update;if(path&&path.constructor==NamespaceInfo){var ns=path;_10d=ns.extension;_10a=ns.fullName;_109=ns.notation;_10e=ns.options;path=ns.path;_10b=ns.shortName;_10c=ns.version;}this.update(path,_109,_10a,_10b,_10c,_10d,_10e);function hasOption(_110){_10e=_10e||this.options;if(!(_10e&&_110&&(_10e.indexOf(_110)>=0))){return false;}var _111=(new RegExp(_110,"g")).exec(_10e);return _111&&(typeof _111[1]!="undefined")&&_111[1]==_110;}function toString(){return"NamespaceInfo"+"\r\n[ fullName: "+this.fullName+"\r\n, shortName: "+this.shortName+"\r\n, version: "+this.version+"\r\n, notation: "+this.notation+"\r\n, options: "+this.options+"\r\n, path: "+this.path+"\r\n, uri: "+this.uri+"\r\n]";}function update(path,_113,_114,_115,_116,_117,_118){this.extension=_117||this.extension||_10;this.fullName=_114||this.fullName||"";this.shortName=_115||this.shortName||"";this.notation=isString(_113)?_113:(this.notation||((_16&&isString(_16.notation))?_16.notation:"."));this.options=isString(_118)?_118:(this.options||getOptions());this.path=isString(path)?path:(this.path||((_16&&isString(_16.path))?_16.path:""));this.uri=this.path+this.fullName.replace(/\x2e/g,this.notation);this.version=""+(_116||this.version||"");if(!this.uri){return;}this.uri+=(this.version?("."+this.version):"")+this.extension;}}function notifyImportListeners(_119){var _11a=[_29.get(""),_29.get(_119),_29.get(_11)];if(!_11a[0]&&!_11a[1]&&!_11a[2]){return;}var _11b=(_11a[0]&&(_11a[0].getSize()>0))||(_11a[1]&&(_11a[1].getSize()>0));if(_7&&_11b){log(("Notify Import Listeners :: "+_119+"..."),arguments);}for(var _11c,i=_11a.length;--i>=0;){if(!_11a[i]){continue;}_11c=_11a[i].getAll();for(var id in _11c){if("undefined"==typeof Object.prototype[id]){_11c[id](_119);}}}if(_7&&_11b){log(("Notify Import Listeners :: "+_119+"...DONE!"),arguments);}}function preserveImportFailSafe(_11f){var _120=(_11f=_11f||window||this).onload;if(_120&&(Function==_120.constructor)){if(importFailSafe.toString()==_120.toString()){return;}}cloakObject(_11f.onload=importFailSafe);function importFailSafe(e){AddImportListener(cloak);completeImports(e);cloak();if(_120&&(Function==_120.constructor)){_120(e);}}}function publishAPI(THIS){Namespace(_12);_30.add((_27=_12),_d);_31.add(_12,_d);cloakObject(this.Import=Import);cloakObject(this.ImportAs=ImportAs);cloakObject(this.Load=Load);cloakObject(this.Namespace=Namespace);cloakObject(THIS.AddImportListener=AddImportListener);cloakObject(THIS.EnableLegacy=SetLegacy);cloakObject(THIS.GetVersion=function(){return _16.version;});cloakObject(THIS.RemoveImportListener=RemoveImportListener);cloakObject(THIS.SetOption=SetOption);cloakObject(THIS.ShowLog=ShowLog);cloakObject(THIS.Unload=$Destroy);publishOption(THIS,"Cloak");publishOption(THIS,"Debug");publishOption(THIS,"Override");publishOption(THIS,"Refresh");SetLegacy(_8||false);}function publishOption(THIS,_124){if(!_124||_124.constructor!=String){return;}cloakObject(THIS["Enable"+_124]=function(_125){SetOption(_124,_125);});}function RemoveImportListener(_126,_127){preserveImportFailSafe();if(!_127||(Function!=_127.constructor)){if(_126&&(Function==_126.constructor)){_127=_126;_126=null;}else{return false;}}else{if(_126&&(String!=_126.constructor)){return false;}}var _128=[_29.get(""),_29.get(_126),_29.get(_11)];if(!_128[0]&&!_128[1]&&!_128[2]){return false;}var _129=false;for(var _12a,i=_128.length;--i>=0;){if(!_128[i]){continue;}_12a=_128[i].getAll();for(var id in _12a){if("undefined"==typeof Object.prototype[id]){if(_12a[id]==_127){_128[i].remove(id);_129=true;break;}}}}return _129;}function SetLegacy(_12d){if(typeof _12d=="undefined"){_12d=true;}_8=_12d;_1a=_1a||GetModule(_d);if(_12d){_1a.DIR_NAMESPACE=_1a.USE_PATH="/";_1a.DOT_NAMESPACE=_1a.USE_NAME=".";cloakObject(_1a.CompleteImports=completeImports);cloakObject(_1a.EnableDebugging=_1a.EnableDebug);cloakObject(_1a.GetPathFor=DEPRECATED$GetPathFor);cloakObject(window.JSBasePath=window.JSPath=_1a.SetBasePath=DEPRECATED$SetBasePath);cloakObject(window.JSImport=Import);cloakObject(window.JSLoad=Load);cloakObject(window.JSPackaging=_1a);cloakObject(window.JSPackage=window.Package=Namespace);cloakObject(window.JSPacked=function(n){_16.notation=n;});cloakObject(window.NamespaceException=window.PackageException=DEPRECATED$NamespaceException);}if(_12d||typeof window["JSPackaging"]=="undefined"){return;}delete _1a.DIR_NAMESPACE;delete _1a.DOT_NAMESPACE;delete _1a.CompleteImports;delete _1a.EnableDebugging;delete _1a.GetPathFor;delete _1a.SetBasePath;delete _1a.USE_NAME;delete _1a.USE_PATH;delete window.JSBasePath;delete window.JSImport;delete window.JSLoad;delete window.JSPackaging;delete window.JSPackage;delete window.JSPacked;delete window.JSPath;delete window.Package;delete window.NamespaceException;delete window.PackageException;}function SetOption(_12f,_130){preserveImportFailSafe();if(!_12f||_12f.constructor!=String){return;}_130=typeof _130=="undefined"?true:_130;_12f=_12f.toLowerCase();switch(_12f){case"cloak":_6=_130;break;case"debug":_7=_130;break;case"legacy":SetLegacy(_130);break;case"override":_b=_130;break;case"refresh":_c=_130;break;default:break;}}function setRefresher(url){if((/ajile.refresh/g).test(url)){return url;}return url+((/\?/g).test(url)?"&":"?")+"ajile.refresh="+Math.random();}function ShowLog(){preserveImportFailSafe();if(!_7){LOG="\r\nTo enable debug logging, use <b>Ajile.EnableDebug()</b> "+"from within any of your scripts or use Ajile's debug load-time "+"option as follows:<br><br>"+"<pre><code>&lt;script src=\""+_16.uri+"?<b>debug</b>\" "+"type=\"text/javascript\"&gt;&lt;/script&gt;</code></pre>";}var _132="<html><head><title>Ajile's Debug Log "+(!_7?":: DISABLED":"")+"</title>\r\n"+"<style type=\"text/css\">*{font-family:\"Tahoma\";font-size: 12px;color:#000;background-color:#eee;}</style>\r\n"+"</head>\r\n<body>"+LOG.replace(/\r\n/g,"<br>")+"</body></html>";var _133=screen.width/1.5;var _134=screen.height/1.5;var _135=window.open("","_AJILE_LOG_","width="+_133+",height="+_134+",addressbar=0,directories=0,location=0,menubar=0,scrollbars=1,statusbar=0,toolbar=0,resizable=1");if(!_135){return;}_135.document.writeln(_132);_135.document.close();}function SimpleSet(){this.add=add;this.clear=clear;this.get=get;this.getAll=getAll;this.getAllArray=getAllArray;this.getSize=getSize;this.has=has;this.remove=remove;var _136={};var size=0;function add(key,_139){if(get(key)){return false;}_136[key]=_139;size++;return true;}function clear(){for(var key in _136){if("undefined"==typeof Object.prototype[key]){delete _136[key];}}size=0;}function get(key){if("undefined"==typeof Object.prototype[key]){if("undefined"==typeof _136[key]){return null;}else{return _136[key];}}else{return null;}}function getAll(){return _136;}function getAllArray(){var _13c=[];for(var item in _136){if("undefined"==typeof Object.prototype[item]){_13c[_13c.length]=[item,_136[item]];}}return _13c;}function getSize(){return size;}function has(key){return typeof Object.prototype[key]=="undefined"&&typeof _136[key]!="undefined";}function remove(key){if(!has(key)){return false;}delete _136[key];size--;return true;}}function updateDependents(_140){var _141=_32.get(_140);if(!_141){return;}_141=_141.getAll();var _142;for(var user in _141){if("undefined"==typeof Object.prototype[user]){if(_30.has(user)&&(_142=GetModule(user))){if(handleImportLoaded(_30.get(user),user,_142,this)){updateDependents(user);}}}}}};