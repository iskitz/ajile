/**----------------------------------------------------------------------------+
| Product:  Ajile [com.iskitz.ajile]
| @version  0.9.1
|+-----------------------------------------------------------------------------+
| @author   Michael A. I. Lee [ http://ajile.iskitz.com/ ]
|
| Created:  Tuesday,   November   4, 2003    [2003.11.04]
| Modified: Friday,    July      27, 2007    [2007.07.27 - 05:01:53 AM EDT]
|+-----------------------------------------------------------------------------+
|
| [Ajile] - Advanced JavaScript Importing & Loading Extension is a JavaScript
|           module that adds namespacing and importing capabilities to the
|           JavaScript Language.
|
|           Visit http://ajile.iskitz.com/ to start creating
|
|                  "Smart scripts that play nice!"
|
|           Copyright (c) 2003-2007 Michael A. I. Lee, iSkitz.com
|
|+-----------------------------------------------------------------------------+
|
| ***** BEGIN LICENSE BLOCK *****
| Version: MPL 1.1/GPL 2.0/LGPL 2.1
|
| The contents of this file are subject to the Mozilla Public License Version
| 1.1 (the "License"); you may not use this file except in compliance with
| the License. You may obtain a copy of the License at
| http://www.mozilla.org/MPL/
|
| Software distributed under the License is distributed on an "AS IS" basis,
| WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
| for the specific language governing rights and limitations under the
| License.
|
| The Original Code is Ajile.
|
| The Initial Developer of the Original Code is Michael A. I. Lee
|
| Portions created by the Initial Developer are Copyright (C) 2003-2007
| the Initial Developer. All Rights Reserved.
|
| Contributor(s): Michael A. I. Lee [ http://ajile.iskitz.com/ ]
|
| Alternatively, the contents of this file may be used under the terms of
| either the GNU General Public License Version 2 or later (the "GPL"), or
| the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
| in which case the provisions of the GPL or the LGPL are applicable instead
| of those above. If you wish to allow use of your version of this file only
| under the terms of either the GPL or the LGPL, and not to allow others to
| use your version of this file under the terms of the MPL, indicate your
| decision by deleting the provisions above and replace them with the notice
| and other provisions required by the GPL or the LGPL. If you do not delete
| the provisions above, a recipient may use your version of this file under
| the terms of any one of the MPL, the GPL or the LGPL.
|
| ***** END LICENSE BLOCK *****
*-----------------------------------------------------------------------------*/
new function/*com.iskitz.ajile*/(){var _1,_2,_3,_4,_5;if(isIncompatible()){return;}var _6=true,_7=false,_8=false,_9=true,_a=true,_b=false,_c=false;var _d="Ajile",_e="Powered by ",_f="index",_10=".js",_11="<*>",_12="com.iskitz.ajile",_13="/",_14=[_d,"Import","ImportAs","Load","Namespace","JSBasePath","JSImport","JSPackage","JSPackaging","JSPacked","JSPath","NamespaceException","Package","PackageException"];var _15,_16=new NamespaceInfo(),_17="__loaded__",_18,LOG="",_1a;var _1b=["*","|",":","\"","<",">","?","[","{","(",")","}","]","\\","&","@","#","$","%","!",";","'","=","+","~",",","^","_"," ","`","-","/","."];var _1c=(/(cloakoff|cloak)/),_1d=(/(debugoff|debug)/),_1e=(/(legacyoff|legacy)/),_1f=(/(mvcoff|mvc)/),_20=(/(mvcshareoff|mvcshare)/),_21=(/(overrideoff|override)/),_22=(/(refreshoff|refresh)/),_23=(/(.*\/)[^\/]+/),_24=(/(.*)\.[^\.]+/),_25=(/(\/\.\/)|(\/[^\/]*\/\.\.\/)/),_26=(/:\/\x2f/);var _27={clear:function(){for(var _28 in this){if("undefined"==typeof Object.prototype[_28]){delete this[_28];}}}};function $create(_29){cloakObject(_1a=_29);if(!(_16=getNamespaceInfo(_12))){_16=new NamespaceInfo();}if(_2){var _2a=document.createElement("meta");if(_2a){_2a.httpEquiv=_e+_d;_e=_12.split(".").reverse().join(".");_2a.content=_e+" :: Smart scripts that play nice ";getMainLoader(this.document).appendChild(_2a);}}_16=new NamespaceInfo(_16);publishAPI(_1a);_2b.add((_2c=_12),_d);_2d.add(_12,_d);handleImportLoaded(_d,_12,_1a,this);loadController();cloak(_12);preserveImportFailSafe();}function $destroy(_2e){if(_2e&&_2e!=_12){destroyModules(_2e);return;}_2f.clear();_30.clear();_31.clear();_27.clear();_2b.clear();_2d.clear();_32.clear();cloak();_18=null;delete Import;delete ImportAs;delete Load;delete Namespace;delete DEPRECATED$NamespaceException;delete _1a;delete window[_d];delete window.Import;delete window.ImportAs;delete window.JSImport;delete window.JSLoad;delete window.JSPackage;delete window.JSPackaging;delete window.Load;delete window.Namespace;delete window.NamespaceException;delete window.Package;delete window.PackageException;destroyEmptyNamespace("com.*");}function addDependence(_33,_34){if(_33==_2c){return;}var _35=_2f.get(_2c);if(!_35){_2f.add(_2c,(_35=new SimpleSet()));}_35.add(_33,_34);}function AddImportListener(_36,_37){preserveImportFailSafe();if(!_37||(Function!=_37.constructor)){if(_36&&(Function==_36.constructor)){_37=_36;_36=null;}else{return false;}}else{if(_36&&(String!=_36.constructor)){return false;}}if(_36==_11&&this==window[_d]){return false;}if(!_36&&this!=window[_d]){_36=_11;}if(_36&&(_2d.has(_36)||GetModule(_36))){return setTimeout(function(){_37(_36);},62.25);}if(!_36&&(_2d.getSize()>0||_2b.getSize()==0)){setTimeout(function(){_37(_36);},62.25);}var _38=_30.get((_36=(_36||"")));if(!_38){_30.add(_36,(_38=new SimpleSet()));}_38.add(Math.random(),_37);return true;}function addUsage(_39){if(_39==_2c){return;}var _3a=_32.get(_39);if(!_3a){_32.add(_39,(_3a=new SimpleSet()));}_3a.add(_2c);}function cloak(_3b){if(_3b&&String!=_3b.constructor){return;}_3b=_3b||"";var _3c=GetModule(_3b);if(_3c){cloakObject((typeof _3c=="function"?_3c:_3c.constructor));}if(!_1){return;}var _3d=GetNamespaceInfo(_3b);var _3e=(_3d&&_3d.hasOption("cloak"));for(var id,src,sys,_42=getLoaders(),i=_42.length;--i>=0;){if(!_42[i]||((id=_42[i].title)&&_3b&&(id!=_3b))){continue;}src=_42[i].src;sys=(src&&(src.indexOf(_12)>=0))||(id&&(id.indexOf(_12)==0));if(sys||(!src&&id)||_3e||_6){if((_3d=_42[i].parentNode)&&_3d.removeChild){_3d.removeChild(_42[i]);}}}}function cloakObject(_44){if(!_44||typeof _44.toString=="undefined"){return;}var _45,_46=((_45=(/(function\s*.*\s*\(.*\))/).exec(_44.toString())||[""])).length>1?_45[1]:_45[0];if(typeof _44.prototype=="undefined"){return;}_44.prototype.constructor.toString=function(e){return(_7&&!_6)?_46:_44.prototype.toString();};}function compareNumbers(_48,_49){return _48-_49;}function completeImports(_4a){var _4b,_4c;if(!(isString(_4a)&&_2b.has(_4a))){_4c=_2b.getAllArray();}else{if(GetModule(_4a)){_4c=[[_4a,_2b.get(_4a)]];}}if(!_4c){return;}for(var _4d,i=_4c.length;--i>=0;){_4a=_4c[i][0];if(!(_2b.has(_4a)&&(_4b=GetModule(_4a)))){continue;}logImportCheck((_4d=_4c[i][1]),_4a,arguments);if(_4d=="*"){_4d=null;}handleImportLoaded(_4d,_4a,_4b,this);updateDependents(_4a);}}function DEPRECATED$GetPathFor(_4f){return"Ajile.GetPathFor("+_4f+") is not supported. "+"Namespace paths are protected.";}function DEPRECATED$NamespaceException(_50){this.name="DEPRECATED: "+_12+".NamespaceException";this.message="DEPRECATED: Invalid _namespace name ["+_50+"]";this.toString=toString;function toString(){return"[ "+this.name+" ] :: "+this.message;}}function DEPRECATED$SetBasePath(_51){if(typeof _51!="undefined"){_16.path=_51;}}function destroyEmptyNamespace(_52){if(!_52){return;}var _53={},_54=_52.split("."),ns=window[_54[0]];for(var i=1,j=_54.length;typeof _54[i]!="undefined";i++){if(typeof ns[_54[i]]=="undefined"){break;}_53[_54[i-1]]=[i,true];ns=ns[_54[i]];for(var _58 in ns){if("undefined"==typeof Object.prototype[_58]){if(_58!=_54[i]){_53[_54[i-1]][1]=false;break;}}}}for(ns in _53){if("undefined"==typeof Object.prototype[ns]){if(_53[ns][1]){destroyModules(_54.slice(0,_53[ns][0]+1).join("."));}}}}function destroyModules(_59){var _5a;if(_59){if(String!=_59.constructor){if((_59=GetNamespaceInfo(_59))){_59=_59.fullName;_5a=_59.shortName;}}if(!_5a&&_59){_5a=_59.substring(_59.lastIndexOf(".")+1);}_59=_24.exec(_59);_59=_59?_59[1]:null;}var _5b=GetModule(_59);if(_5b&&_5a){if(_5a=="*"||typeof(_5b[_5a])!="undefined"){if(_5a!="*"){if(_5b[_5a]==window[_5a]){window[_5a]=null;}delete _5b[_5a];}else{for(var _5c in _5b){if("undefined"==typeof Object.prototype[_5c]){delete _5b[_5c];}}destroyEmptyNamespace(_59);}}}cloak(_59);return;}function detectCurrentModule(_5d){var _5e=_5d;var _5f=_2b.getAllArray();for(var _60,i=0,j=_5f.length;i<j;++i){if(_2d.has((_60=_5f[i][0]))){continue;}if("*"!=_5f[i][1]){_5e=_24.exec(_60);}if(!(_5e&&(_5d==_5e[1]))){continue;}_2d.add((_2c=_60));return;}_2c=_f;}function getContainer(_63){if(!_63){return window.document;}if(typeof _63.write=="undefined"){if(typeof _63.document!="undefined"){_63=_63.document;}else{if(typeof _63.parentNode!="undefined"){return getContainer(_63.parentNode);}else{return window.document;}}}return _63;}function getImportInfo(_64,_65){if(!_65){return null;}var _66=_65.split(".");var _67;for(var i=0,j=_66.length;i<j;i++){if(isNaN(_66[i])){continue;}_65=_66.slice(0,i).join(".");_64=_64||_66.slice(i-1,i)[0];_67=_66.slice(i).join(".");break;}if(!_67){return null;}return[_64,_65,_67];}function getLoaders(_6a){if(!(_6a=getContainer(_6a))){return null;}var _6b=(typeof _6a.scripts!="undefined"&&typeof _6a.scripts.length!="undefined"&&_6a.scripts.length>0)?_6a.scripts:(typeof _6a.getElementsByTagName!="undefined")?(_6a.getElementsByTagName("script")||[]):[];return _6b;}function getMainLoader(_6c){if(_6c){if((!_18||_3)&&!_2){if((_18&&_4&&_6c!=_18.ownerDocument)||!_18||!_4&&_3){if(_6c.lastChild&&_6c.lastChild.firstChild){_18=_6c.lastChild.firstChild;}}}else{if(!_18&&_2){_18=_15;}}}return _18;}function getMETAInfo(_6d){loadOptions(_6d);if(!_6d||_6d.constructor!=String){return[];}var _6e=_10?_6d.lastIndexOf(_10):_6d.lastIndexOf(".");if(_6e<_6d.length&&_6e>=0){var _6f=_6d.slice(_6e,_6e+_10.length);var _70=_6d.substring(0,_6e);if(_70&&isNaN(_70.charAt(0))){_70="";}}return[_70,_6f];}function GetModule(_71,_72){if(!isString(_71)){return null;}var _73=_72||window;_71=_71.split(".");for(var i=0,j=_71.length;i<j;i++){if(typeof _73[_71[i]]!="undefined"){_73=_73[_71[i]];}else{return null;}}return _73;}function GetNamespaceInfo(_76){if(!_76){return new NamespaceInfo(_16);}var _77=_76.constructor==String;for(var _78 in _27){if("undefined"==typeof Object.prototype[_78]){if((_77&&_76==_78)||(!_77&&_76==GetModule(_78))){return _27[_78];}}}return null;}function getNamespaceInfo(_79,_7a){_79=_79||_12;if(_79==_12&&_16.path){return _16;}var _7b=_27[_79];if(_7b){return _7b;}var _7c=getNamespaceLookups(_79,_7a);if((_7b=getNamespaceInfoCached(_79,_7c))){return(_27[_79]=_7b);}var _7d=getLoaders();if(!(_7d&&_7c)){return null;}var _7e;for(var _7f=false,_80,_81,i=0,j=_7d.length;i<j;i++){_80=unescape(_7d[i].src);if(_80&&_80.search(_26)==-1){_80=unescape(document.location.href);if(_80.charAt(_80.length-1)!=_13){if((_81=_23.exec(_80))!=null){if(_81[1].length>_80.search(_26)+3){_80=_81[1];}}}_80+=unescape(_7d[i].src);}if(typeof _80=="undefined"||_80==null){continue;}while(_25.test(_80)){_80=_80.replace(_25,"/");}if(_31.has(_80)){continue;}_31.add(_80);if(_7f){continue;}var _84;for(var _85 in _7c){if(typeof Object.prototype[_85]!="undefined"){continue;}_84=_7c[_85];var _86,_87,_88=[];for(var lc=_84.length;--lc>=0;){_86=_84[lc];_87=_80.lastIndexOf(_86)+1;if(_87<=0||_87==_88[0]){continue;}_88[_88.length]=_87;log("Found Path [ "+_80+" ]",arguments);}if(_88.length==0){continue;}_88.sort(compareNumbers);_87=_88[_88.length-1];_7a=(_87==(_80.lastIndexOf(_86)+1))?_85:null;_7e=_80.substring(0,_87);_7f=true;if(_79==_12&&_7d[i].title!=_12){_7d[i].title=_12;}var _8a=_87+_86.length-2;var _8b=getMETAInfo(_80.substring(_8a+1));var _8c=_8b[1];var _8d=_8b[0];break;}}if(!_7e){return null;}_7b=new NamespaceInfo(_7e,_7a,_79,null,_8d,_8c);_27[_79]=_7b;return _7b;}function getNamespaceInfoCached(_8e,_8f){var _90=Number.MAX_VALUE;var _91;var _92=[];var _93;var _94=0;_8f=_8f||getNamespaceLookups(_8e);var _95=[];var _96=_31.getAll();_96:for(var _97 in _96){if(typeof Object.prototype[_97]!="undefined"){continue;}for(var _98 in _8f){if(typeof Object.prototype[_98]!="undefined"){continue;}_95[_95.length]=_98;for(var _99=_8f[_98],i=_99.length;--i>=0;){if(0<(_93=_97.lastIndexOf(_99[i]))){_91=_97.length-(_93+_99[i].length);if(_91<_90){_90=_91;_94=_92.length;}_92[_92.length]=_93+1;var _9b=(_93+1)+_99[i].length-2;var _9c=getMETAInfo(_97.substring(_9b+1));var _9d=_9c[1];var _9e=_9c[0];log("Found Cached Path [ "+_97+" ]",arguments);break _96;}if(i==0){delete _95[--_95.length];}}}}if(!_92||_92.length==0){return null;}_97=_97.substring(0,_92[_94]);var _9f=new NamespaceInfo(_97,_95[_94],_8e,null,_9e,_9d);if(_9f.path){_27[_8e]=_9f;}return _9f;}function getNamespaceLookups(_a0,_a1){var _a2=getSeparator();var _a3=typeof _a1=="undefined"?_1b:[_a1];var _a4={};for(var i=_a3.length;--i>=0;){_a1=_a3[i];_a4[_a1]=[];_a4[_a1][2]=_a2+_a0.replace(/\x2e/g,_a1);_a4[_a1][0]=_a4[_a1][2]+_a1;_a4[_a1][1]=_a4[_a1][2]+_a2;_a4[_a1][2]=_a4[_a1][2]+".";}return _a4;}function getOptions(){return[(_6?"cloak":"cloakoff"),(_7?"debug":"debugoff"),(_8?"legacy":"legacyoff"),(_9?"mvc":"mvcoff"),(_a?"mvcshare":"mvcshareoff"),(_b?"override":"overrideoff"),(_c?"refresh":"refreshoff")].join(",");}function getSeparator(){var _a6=unescape(document.location.href);var _a7=_a6.lastIndexOf("\\")+1;var _a8=_a6.lastIndexOf("/")+1;_13=(_a7>_a8?"\\":"/");return _13;}function handleImport(_a9,_aa,url,_ac,_ad,_ae,_af){var _b0=_aa+(_a9=="*"?".*":"");var _b1=_b0;var _b2;do{if((_b0=_24.exec(_b0))){_b0=_b0[1];}else{break;}if(_b0==_b1){break;}_b1=_b0;_b2=getNamespaceInfo(_b0);}while(!_b2);if(typeof url=="undefined"||url==null||url.constructor!=String){url=(typeof _b2!="undefined"&&typeof(_b2.path)!="undefined")?_b2.path:(_16.path||"");}if(url.lastIndexOf("/")!=(url.length-1)){url+="/";}if(_8){if(_ac==false){_ac="/";}else{if(_ac==true){_ac=".";}}}if(typeof _ac=="undefined"){_ac=_b2?typeof _b2.notation=="undefined"?_16.notation:_b2.notation:_16.notation;}url+=escape(_aa.replace(/\x2e/g,_ac));addDependence(_aa,(_a9=="*"?_aa:_a9));addUsage(_aa);if(_2b.add(_aa,_a9)){if(_a9=="*"){_a9=_17;log("Import (\""+_aa+".*\")...",arguments);}else{log("ImportAs (\""+_a9+"\", \""+_aa+"\")...",arguments);}if(_ad){url+="."+_ad;}url+=_10;if(_b2&&_b2.hasOption("refresh")){url=setRefresher(url);}var _b3=Load(url,getContainer((_af||this)),"ImportAs(\""+_a9+"\", \""+_aa+"\");",false,_aa);if(!_b3){return _ae;}(new ImportThread(_aa)).start();}return _ae;}function handleImportLoaded(_b4,_b5,_b6,_b7){_b7=_b7||this;if(!_b6){return _b6;}if((_b4!=_17)&&hasNamingConflict(_b4,_b5,_b7)){_2b.remove(_b5);return _b6;}if(!isSupported(_b5,_b4)){return null;}var _b8=[];var _b9=_2b.get(_b5);if(_b4&&_b4!=_17&&(!_b9||(_b9!="*"&&_b9!=_17))){_b7[_b4]=_b6;_b8[0]="ImportAs (\""+_b4+"\", \""+_b5+"\")...SUCCESS";_2b.remove(_b5);}else{if(_b9=="*"){_b8[_b8.length]=" ";var _ba;for(var _bb in _b6){if(typeof Object.prototype[_bb]!="undefined"){continue;}_ba=_b5+"."+_bb;if(_27[_ba]||hasNamingConflict(_bb,_ba,_b7)){continue;}_b7[_bb]=_b6[_bb];_b8[_b8.length]="ImportAs (\""+_bb+"\", \""+_ba+"\")...SUCCESS";}_2b.remove(_b5);if(_b4!=_17){_2b.add(_b5,_17);}}else{if(_b9!="*"&&(_b9==_17||_b4==_17)){_b8[0]="Import (\""+_b5+".*\")...SUCCESS";_2b.remove(_b5);}}}if(_b8.length>0){log(_b8.join("\r\n"),arguments);}notifyImportListeners(_b5);return _b6;}function hasNamingConflict(_bc,_bd,_be){_be=_be||this;if(_b||(typeof _be[_bc]=="undefined")||(GetModule(_bd)==_be[_bc])){return false;}log("\nWARNING: There is a naming conflict with the alias "+_bc+".\nConsider using ImportAs with a different alias. For example:"+"\n\n\tImportAs (\""+_bc+"1\", \""+_bd+"\");\n\n"+"The module can currently be accessed using its fully-qualified "+"name:\n\n\t"+_bd+".\n",arguments,_7);return true;}function Import(_bf,url,_c1,_c2){return ImportAs(null,_bf,url,_c1,_c2);}function ImportAs(_c3,_c4,url,_c6,_c7){preserveImportFailSafe();if(!_c4||_c4=="*"){log("ImportAs (\""+_c3+"\", \""+_c4+"\")...INVALID!");return null;}var _c8,_c9;if(!isString(_c3)){_c3="";}if((_c8=getImportInfo(_c3,_c4))){_c4=_c8[1];_c3=(_c3!=_17)?_c8[0]:_17;_c9=_c8[2];}else{if(!_c3){_c3=_c4.substring(_c4.lastIndexOf(".")+1);}}_c7=_c7||this;if(_c3=="*"){_c4=_24.exec(_c4)[1];}else{if(_c7[_c3]){for(var t=_14.length;--t>=0;){if(_c3!=_14[t]){continue;}log("ImportAs (\""+_c3+"\", \""+_c4+"\") "+"failed. "+_c3+" is restricted.",arguments);return _c7[_c3];}}}var _cb=_c7;var _cc="";for(var _cd=_c4.split("."),i=0,j=_cd.length;i<j;i++){if(typeof _cb[_cd[i]]!="undefined"){_cb=_cb[_cd[i]];_cc+=_cd[i]+".";}else{break;}}if((i>=j&&_c3!="*")){if(_2b.has(_c4)||!_2d.has(_c4)){_cb=handleImportLoaded(_c3,_c4,_cb,_c7);updateDependents(_c4);}return _cb;}if(_2b.has(_c4)){if(_c3=="*"||_c3==_17){_c3=_c4;}addDependence(_c4,_c3);addUsage(_c4);return null;}return handleImport(_c3,_c4,url,_c6,_c9,_cb,_c7);}function ImportThread(_d0,ttl,_d2){var _d3,_d4,_d5=0;function $ImportThread(_d6){_d2=_d2||500;ttl=ttl||60000;_d3=window.setInterval(stop,ttl);_d6.start=start;_d6.stop=stop;return _d6;}function start(){if(_d5>=_d2){stop();return;}if(GetModule(_d0)){completeImports();}else{_d4=window.setTimeout(start,0);}}function stop(){if(typeof _d4!="undefined"){window.clearTimeout(_d4);}if(typeof _d3!="undefined"){window.clearInterval(_d3);}}if(this.constructor!=ImportThread){return new ImportThread(_d0,ttl,_d2);}return $ImportThread(this);}function isIncompatible(){if(typeof document=="undefined"){return false;}_5="undefined"!=typeof document.write&&"undefined"!=typeof document.writeln;_1=_5&&"undefined"!=typeof document.createElement;_2=_1&&"undefined"!=typeof document.createTextNode&&"undefined"!=typeof document.getElementsByTagName&&"undefined"!=typeof(_15=document.getElementsByTagName("head")[0]).appendChild&&"undefined"!=typeof _15.removeChild;_3=_2&&"undefined"!=typeof document.firstChild&&"undefined"!=typeof document.lastChild&&"undefined"!=typeof document.parentNode;_4=_3&&"undefined"!=typeof document.ownerDocument;return!(_5||_1||_2||_3||_4);}function isString(_d7){return(_d7!=null&&typeof _d7!="undefined"&&_d7.constructor==String);}function isSupported(_d8,_d9){var _da=(_d8==_2c);var _db=_2b.has(_d8);var _dc=_2f.get(_d8);function isInlineImportReady(){if(_da||isSupported(_2c)||_db){return true;}_2b.add(_d8,_d9);(new ImportThread(_d8)).start();return false;}if(!_dc||!(_dc=_dc.getAll())){return isInlineImportReady();}for(var _dd in _dc){if("undefined"==typeof Object.prototype[_dd]){if(!GetModule(_dc[_dd])){return false;}}}return isInlineImportReady();}function Load(url,_df,_e0,_e1,_e2,_e3,_e4){preserveImportFailSafe();if(!(_df=getContainer(_df))){log("Invalid container. Unable to load:\n\n["+url+"]",arguments);return false;}if(url){_31.add(window.unescape(url));if(_c){url=setRefresher(url);}}if(!(_e3||_e4)){_e4="JavaScript";_e3="text/javascript";}if(typeof _e1=="undefined"){_e1=false;}var _e5;if(_1){_e5=_df.createElement("script");}if(!_e5){if(_e0){_e0="window.setTimeout('"+_e0+"',0);";}LoadSimple(url,_df,_e0,_e1,_e2,_e3,_e4);return false;}if(_e1){_e5.defer=_e1;}if(_e4){_e5.language=_e4;}if(_e2){_e5.title=_e2;}if(_e3){_e5.type=_e3;}if(url){log("Load [ "+url+" ]...",arguments);if(_e6||!_e7){_e5.src=url;}getMainLoader(_df).appendChild(_e5);if(_e8||_e7){_e5.src=url;}log("Load [ "+url+" ]...DONE!",arguments);}if(!_e0){return true;}if(url){Load(null,_df,_e0,_e1,_e2,_e3,_e4);return true;}if(typeof(_e5.canHaveChildren)=="undefined"||_e5.canHaveChildren){_e5.appendChild(_df.createTextNode(_e0));}else{if(!_e5.canHaveChildren){_e5.text=_e0;}}getMainLoader(_df).appendChild(_e5);return false;}function loadController(){if(!(_9||_a)){return;}if(_a){Load(_16.path+_f+_10,null,null,null,_f);}if(!_9){return;}var _e9=unescape(document.location.href);var _ea=_e9.lastIndexOf(_13);_e9=_e9.substring(++_ea);_ea=_e9.lastIndexOf(".");_ea=(_ea==-1)?0:_ea;if(""!=(_e9=_e9.substring(0,_ea))){_f=_e9;}Load(_f+_10,null,null,null,_f);}function loadOptions(_eb){if(!_eb||_eb.constructor!=String){return;}var _ec=_eb.lastIndexOf("?")+1;_eb=_eb.substring(_ec).toLowerCase();if(_eb.length==0){return;}var _ed;if((_ed=_1c.exec(_eb))){_6=_ed[1]=="cloak";}if((_ed=_1d.exec(_eb))){_7=_ed[1]=="debug";}if((_ed=_1e.exec(_eb))){SetLegacy(_ed[1]=="legacy");}if((_ed=_1f.exec(_eb))){_9=_ed[1]=="mvc";}if((_ed=_20.exec(_eb))){_a=_ed[1]=="mvcshare";}if((_ed=_21.exec(_eb))){_b=_ed[1]=="override";}if((_ed=_22.exec(_eb))){_c=_ed[1]=="refresh";}}function LoadSimple(src,_ef,_f0,_f1,_f2,_f3,_f4){if(!(_ef=getContainer(_ef))){return;}var _f5;if(src){log("LoadSimple [ "+src+" ]...",arguments);_f5=_f0;_f0=null;}var _f6="<"+"script"+(_f1?" defer=\"defer\"":"")+(_f4?(" language=\""+_f4+"\""):"")+(_f2?(" title=\""+_f2+"\""):"")+(_f3?(" type=\""+_f3+"\""):"")+(src?(" src=\""+src+"\">"):">")+(_f0?(_f0+";"):"")+"</script>\n";_ef.write(_f6);if(src){log("LoadSimple [ "+src+" ]...DONE!",arguments);}if(!(_f0=_f0||_f5)){return;}if(src){LoadSimple(null,_ef,_f0,_f1,_f2,_f3,_f4);}}function log(_f7,_f8,_f9){if(!_7&&!_f9){return;}var _fa,_fb=1<((_fa=(/function\s*(\w*)\(/).exec(_f8.callee))||["("]).length?_fa[1]:"";if(typeof _f7!="undefined"){var _fc=LOG;var now=new Date();LOG=[now.getFullYear(),now.getMonth(),now.getDate()].join(".")+","+[now.getHours(),now.getMinutes(),now.getSeconds(),now.getMilliseconds()].join(":")+"\t:: "+_2c+" :: "+_fb+"\r\n"+_f7+"\r\n\r\n";if(typeof console!="undefined"){if(typeof console.info=="function"){console.info(LOG);}}if(typeof YAHOO!="undefined"){if(typeof YAHOO.log=="function"){YAHOO.log(LOG);}}if(typeof MochiKit!="undefined"){if(typeof MochiKit.log=="function"){MochiKit.log(LOG);}}LOG+=_fc;}if(_f9){ShowLog();}}function logImportCheck(_fe,_ff,_100){var _101=(_fe=="*"||_fe==_17)?("Import (\""+_ff+".*\")"):("ImportAs (\""+_fe+"\", \""+_ff+"\")");log((_101+"...CHECKING"),_100);}function Namespace(_102,path,_104,_105){preserveImportFailSafe();_102=_102||"<default>";log("Namespace (\""+_102+"\")",arguments);var _106=_105||window;if(_102=="<default>"){_16.update(path,_104);log(_16,arguments);return _106;}detectCurrentModule(_102);var _107=_102.split(".");for(var i=0,j=_107.length;i<j;i++){if(typeof _106[_107[i]]!="undefined"){_106=_106[_107[i]];}else{_106=_106[_107[i]]={};}}var _10a=_27[_102];if(_10a){_10a.update(path,_104);log(_10a,arguments);return _106;}if(!path){_10a=getNamespaceInfo(_102,_104);}if(path||!_10a){_10a=new NamespaceInfo(path,_104,_102);}if(_10a&&!_27[_102]){_27[_102]=_10a;}log(_10a,arguments);return _106;}function NamespaceInfo(path,_10c,_10d,_10e,_10f,_110,_111){function $NamespaceInfo(THIS){handleArguments();THIS.hasOption=hasOption;THIS.toString=toString;THIS.update=update;THIS.update(path,_10c,_10d,_10e,_10f,_110,_111);return THIS;}function handleArguments(){if(!(path&&path.constructor==NamespaceInfo)){return;}var ns=path;_110=ns.extension;_10d=ns.fullName;_10c=ns.notation;_111=ns.options;path=ns.path;_10e=ns.shortName;_10f=ns.version;}function hasOption(_114){_111=_111||this.options;if(!(_111&&_114&&(_111.indexOf(_114)>=0))){return false;}var _115=(new RegExp(_114,"g")).exec(_111);return _115&&(typeof _115[1]!="undefined")&&_115[1]==_114;}function toString(){return"NamespaceInfo"+"\r\n[ fullName: "+this.fullName+"\r\n, shortName: "+this.shortName+"\r\n, version: "+this.version+"\r\n, notation: "+this.notation+"\r\n, options: "+this.options+"\r\n, path: "+this.path+"\r\n, uri: "+this.uri+"\r\n]";}function update(path,_117,_118,_119,_11a,_11b,_11c){this.extension=_11b||this.extension||_10;this.fullName=_118||this.fullName||"";this.shortName=_119||this.shortName||"";this.notation=isString(_117)?_117:(this.notation||((_16&&isString(_16.notation))?_16.notation:"."));this.options=isString(_11c)?_11c:(this.options||getOptions());this.path=isString(path)?path:(this.path||((_16&&isString(_16.path))?_16.path:""));this.uri=this.path+this.fullName.replace(/\x2e/g,this.notation);this.version=""+(_11a||this.version||"");if(!this.uri){return;}this.uri+=(this.version?("."+this.version):"")+this.extension;}if(this.constructor!=NamespaceInfo){return new NamespaceInfo(path,_10c,_10d,_10e,_10f,_110,_111);}return $NamespaceInfo(this);}function notifyImportListeners(_11d){var _11e=[_30.get(""),_30.get(_11d),_30.get(_11)];if(!_11e[0]&&!_11e[1]&&!_11e[2]){return;}var _11f=(_11e[0]&&(_11e[0].getSize()>0))||(_11e[1]&&(_11e[1].getSize()>0));if(_7&&_11f){log(("Notify Import Listeners :: "+_11d+"..."),arguments);}for(var _120,i=_11e.length;--i>=0;){if(!_11e[i]){continue;}_120=_11e[i].getAll();for(var id in _120){if("undefined"==typeof Object.prototype[id]){_120[id](_11d);}}}if(_7&&_11f){log(("Notify Import Listeners :: "+_11d+"...DONE!"),arguments);}}function preserveImportFailSafe(_123){var _124=(_123=_123||window||this).onload;function importFailSafe(e){AddImportListener(cloak);completeImports(e);cloak();if(_124&&(Function==_124.constructor)){_124(e);}}if(_124&&(Function==_124.constructor)){if(importFailSafe.toString()==_124.toString()){return;}}cloakObject(_123.onload=importFailSafe);}function publishAPI(THIS){Namespace(_12);cloakObject(this.Import=Import);cloakObject(this.ImportAs=ImportAs);cloakObject(this.Load=Load);cloakObject(this.Namespace=Namespace);cloakObject(THIS.AddImportListener=AddImportListener);cloakObject(THIS.EnableLegacy=SetLegacy);cloakObject(THIS.GetVersion=function(){return _16.version;});cloakObject(THIS.RemoveImportListener=RemoveImportListener);cloakObject(THIS.SetOption=SetOption);cloakObject(THIS.ShowLog=ShowLog);cloakObject(THIS.Unload=$destroy);publishOption(THIS,"Cloak");publishOption(THIS,"Debug");publishOption(THIS,"Override");publishOption(THIS,"Refresh");SetLegacy(_8||false);}function publishOption(THIS,_128){if(!_128||_128.constructor!=String){return;}cloakObject(THIS["Enable"+_128]=function(_129){SetOption(_128,_129);});}function RemoveImportListener(_12a,_12b){preserveImportFailSafe();if(!_12b||(Function!=_12b.constructor)){if(_12a&&(Function==_12a.constructor)){_12b=_12a;_12a=null;}else{return false;}}else{if(_12a&&(String!=_12a.constructor)){return false;}}var _12c=[_30.get(""),_30.get(_12a),_30.get(_11)];if(!_12c[0]&&!_12c[1]&&!_12c[2]){return false;}var _12d=false;for(var _12e,i=_12c.length;--i>=0;){if(!_12c[i]){continue;}_12e=_12c[i].getAll();for(var id in _12e){if("undefined"==typeof Object.prototype[id]){if(_12e[id]==_12b){_12c[i].remove(id);_12d=true;break;}}}}return _12d;}function SetLegacy(_131){if(typeof _131=="undefined"){_131=true;}_8=_131;_1a=_1a||GetModule(_d);if(_131){_1a.DIR_NAMESPACE=_1a.USE_PATH="/";_1a.DOT_NAMESPACE=_1a.USE_NAME=".";cloakObject(_1a.CompleteImports=completeImports);cloakObject(_1a.EnableDebugging=_1a.EnableDebug);cloakObject(_1a.GetPathFor=DEPRECATED$GetPathFor);cloakObject(window.JSBasePath=window.JSPath=_1a.SetBasePath=DEPRECATED$SetBasePath);cloakObject(window.JSImport=Import);cloakObject(window.JSLoad=Load);cloakObject(window.JSPackaging=_1a);cloakObject(window.JSPackage=window.Package=Namespace);cloakObject(window.JSPacked=function(n){_16.notation=n;});cloakObject(window.NamespaceException=window.PackageException=DEPRECATED$NamespaceException);}if(_131||typeof window["JSPackaging"]=="undefined"){return;}delete _1a.DIR_NAMESPACE;delete _1a.DOT_NAMESPACE;delete _1a.CompleteImports;delete _1a.EnableDebugging;delete _1a.GetPathFor;delete _1a.SetBasePath;delete _1a.USE_NAME;delete _1a.USE_PATH;delete window.JSBasePath;delete window.JSImport;delete window.JSLoad;delete window.JSPackaging;delete window.JSPackage;delete window.JSPacked;delete window.JSPath;delete window.Package;delete window.NamespaceException;delete window.PackageException;}function SetOption(_133,_134){preserveImportFailSafe();if(!_133||_133.constructor!=String){return;}_134=typeof _134=="undefined"?true:_134;_133=_133.toLowerCase();switch(_133){case"cloak":_6=_134;break;case"debug":_7=_134;break;case"legacy":SetLegacy(_134);break;case"override":_b=_134;break;case"refresh":_c=_134;break;default:break;}}function setRefresher(url){if((/ajile.refresh/g).test(url)){return url;}return url+((/\?/g).test(url)?"&":"?")+"ajile.refresh="+Math.random();}function ShowLog(){preserveImportFailSafe();if(!_7){LOG="\r\nTo enable debug logging, use <b>Ajile.EnableDebug()</b> "+"from within any of your scripts or use Ajile's debug load-time "+"option as follows:<br><br>"+"<pre><code>&lt;script src=\""+_16.uri+"?<b>debug</b>\" "+"type=\"text/javascript\"&gt;&lt;/script&gt;</code></pre>";}var _136="<html><head><title>Ajile's Debug Log "+(!_7?":: DISABLED":"")+"</title>\r\n"+"<style type=\"text/css\">*{font-family:\"Tahoma\";font-size: 12px;color:#000;background-color:#eee;}</style>\r\n"+"</head>\r\n<body>"+LOG.replace(/\r\n/g,"<br>")+"</body></html>";var _137=screen.width/1.5;var _138=screen.height/1.5;var _139=window.open("","_AJILE_LOG_","width="+_137+",height="+_138+",addressbar=0,directories=0,location=0,menubar=0,scrollbars=1,statusbar=0,toolbar=0,resizable=1");if(!_139){return;}_139.document.writeln(_136);_139.document.close();}function SimpleSet(){var _13a={},size=0;function $SimpleSet(THIS){THIS.add=add;THIS.clear=clear;THIS.get=get;THIS.getAll=getAll;THIS.getAllArray=getAllArray;THIS.getSize=getSize;THIS.has=has;THIS.remove=remove;return THIS;}function add(key,_13e){if(get(key)){return false;}_13a[key]=_13e;size++;return true;}function clear(){for(var key in _13a){if("undefined"==typeof Object.prototype[key]){delete _13a[key];}}size=0;}function get(key){if("undefined"==typeof Object.prototype[key]){if("undefined"==typeof _13a[key]){return null;}else{return _13a[key];}}else{return null;}}function getAll(){return _13a;}function getAllArray(){var _141=[];for(var item in _13a){if("undefined"==typeof Object.prototype[item]){_141[_141.length]=[item,_13a[item]];}}return _141;}function getSize(){return size;}function has(key){return typeof Object.prototype[key]=="undefined"&&typeof _13a[key]!="undefined";}function remove(key){if(!has(key)){return false;}delete _13a[key];size--;return true;}if(this.constructor!=SimpleSet){return new SimpleSet();}return $SimpleSet(this);}function updateDependents(_145){var _146=_32.get(_145);if(!_146){return;}_146=_146.getAll();var _147;for(var user in _146){if("undefined"==typeof Object.prototype[user]){if(_2b.has(user)&&(_147=GetModule(user))){if(handleImportLoaded(_2b.get(user),user,_147,this)){updateDependents(user);}}}}}var _2c=_12,_2f=new SimpleSet(),_30=new SimpleSet(),_e8=(/MSIE/i).test(window.navigator.userAgent),_e7=(/Opera/i).test(window.navigator.userAgent),_e6=(/WebKit/i).test(window.navigator.userAgent),_31=new SimpleSet(),_2b=new SimpleSet(),_2d=new SimpleSet(),_32=new SimpleSet();$create(this);};